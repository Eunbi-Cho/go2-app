"use client"

import type React from "react"
import { useState } from "react"
import { View, Text, TouchableOpacity, FlatList, StyleSheet, ScrollView, Dimensions } from "react-native"
import Modal from "react-native-modal"

interface EmojiKeyboardProps {
  onEmojiSelect: (emoji: string) => void
  onClose: () => void
  isVisible: boolean
}

interface EmojiCategory {
  title: string
  icon: string
  emojis: string[]
}

const EMOJI_CATEGORIES: EmojiCategory[] = [
  {
    title: "í‘œì •",
    icon: "ğŸ˜Š",
    emojis: [
      "ğŸ˜€",
      "ğŸ˜ƒ",
      "ğŸ˜„",
      "ğŸ˜",
      "ğŸ˜†",
      "ğŸ˜…",
      "ğŸ˜‚",
      "â˜ºï¸",
      "ğŸ˜Š",
      "ğŸ˜‡",
      "ğŸ™‚",
      "ğŸ™ƒ",
      "ğŸ˜‰",
      "ğŸ˜Œ",
      "ğŸ˜",
      "ğŸ˜˜",
      "ğŸ˜‹",
      "ğŸ˜›",
      "ğŸ˜",
      "ğŸ˜œ",
      "ğŸ¤ª",
      "ğŸ¤¨",
      "ğŸ˜",
      "ğŸ¥³",
      "ğŸ¤©",
      "ğŸ¥¸",
      "ğŸ˜¡",
      "ğŸ¤¯",
      "ğŸ¤­",
      "ğŸ«¡",
      "ğŸ«¢",
      "ğŸ¤«",
      "ğŸ« ",
      "ğŸ˜¶",
      "ğŸ«¨",
      "ğŸ¤¢",
      "ğŸ¤®",
      "ğŸ¤§",
      "ğŸ¤",
      "ğŸ¥´",
      "ğŸ‘‹",
      "ğŸ¤š",
      "âœ‹",
      "ğŸ–ï¸",
      "ğŸ‘Œ",
      "ğŸ¤Œ",
      "ğŸ¤",
      "âœŒï¸",
      "ğŸ¤",
      "ğŸ¤Ÿ",
      "ğŸ¤˜",
      "ğŸ¤™",
      "ğŸ‘ˆ",
      "ğŸ‘‰",
      "ğŸ‘†",
      "ğŸ‘‡",
      "â˜ï¸",
      "ğŸ‘",
      "ğŸ‘",
      "âœŠ",
      "ğŸ‘Š",
      "ğŸ¤›",
      "ğŸ¤œ",
      "ğŸ‘",
    ],
  },
  {
    title: "ìŠ¤í¬ì¸ ",
    icon: "âš½",
    emojis: [
      "ğŸ¤¸â€â™€ï¸",
      "ğŸ§˜â€â™€ï¸",
      "ğŸ§˜",
      "ğŸš£â€â™€ï¸",
      "ğŸ§—â€â™€ï¸",
      "ğŸ©°",
      "ğŸ‚",
      "âš½",
      "ğŸ€",
      "âš¾",
      "ğŸ¾",
      "ğŸ",
      "ğŸ±",
      "â›³",
      "ğŸ¤¿",
      "ğŸ¥‹",
      "ğŸ›¹",
      "ğŸ¿",
      "ğŸ›·",
      "ğŸ„",
      "ğŸ„â€â™‚ï¸",
      "ğŸš´",
      "ğŸš´â€â™‚ï¸",
      "ğŸ§—â€â™€ï¸",
      "ğŸ‹ï¸",
      "ğŸƒ",
      "ğŸŠâ€â™‚ï¸",
      "ğŸ¸",
      "ğŸ³",
      "ğŸ‘",
      "ğŸ“",
      "ğŸ¥Š",
      "â›¸ï¸",
      "â›¹ï¸â€â™€ï¸",
      "ğŸª‚",
      "ğŸ‡"
    ],
  },
  {
    title: "ìŒì‹",
    icon: "ğŸ”",
    emojis: [
      "ğŸ”",
      "ğŸŒ­",
      "ğŸ•",
      "ğŸ¥ª",
      "ğŸŒ®",
      "ğŸŒ¯",
      "ğŸœ",
      "ğŸ",
      "ğŸ£",
      "ğŸ±",
      "ğŸ™",
      "ğŸš",
      "ğŸ°",
      "ğŸ§",
      "ğŸ¦",
      "ğŸ¨",
      "ğŸ©",
      "ğŸª",
      "ğŸ«",
      "ğŸ­",
      "ğŸ¿",
      "ğŸ¥¤",
      "ğŸ´",
      "ğŸ¥¢",
      "ğŸ",
      "ğŸ",
      "ğŸŠ",
      "ğŸŒ",
      "ğŸ‰",
      "ğŸ‡",
      "ğŸ“",
      "ğŸ«",
      "ğŸˆ",
      "ğŸ’",
      "ğŸ‘",
      "ğŸ¥­",
      "ğŸ",
      "ğŸ¥¥",
      "ğŸ¥",
      "ğŸ…",
      "ğŸ†",
      "ğŸ«›",
      "ğŸ¥¦",
      "ğŸ¥¬",
      "ğŸŒ½",
      "ğŸ¥•",
      "ğŸ ",
      "ğŸ¥",
      "ğŸ¥¯",
      "ğŸ",
      "ğŸ¥–",
      "ğŸ¥¨",
      "ğŸ§€",
      "ğŸ¥š",
      "ğŸ¥“",
      "ğŸ¥©",
      "ğŸ—",
      "ğŸ¼",
      "ğŸ¥›",
      "ğŸ¯",
      "ğŸ«–",
      "ğŸ·"
    ],
  },
  {
    title: "ë™ë¬¼",
    icon: "ğŸ¶",
    emojis: [
      "ğŸ¶",
      "ğŸ±",
      "ğŸ­",
      "ğŸ¹",
      "ğŸ°",
      "ğŸ¦Š",
      "ğŸ»",
      "ğŸ¼",
      "ğŸ¨",
      "ğŸ¯",
      "ğŸ¦",
      "ğŸ®",
      "ğŸ·",
      "ğŸ¸",
      "ğŸµ",
      "ğŸ¦„",
      "ğŸ¢",
      "ğŸ¦‹",
      "ğŸŸ",
      "ğŸ¬",
      "ğŸ¦ˆ",
      "ğŸ¦˜",
      "ğŸ¦’",
      "ğŸ¦¬",
      "ğŸ”",
      "ğŸ§",
      "ğŸ£",
      "ğŸª¿",
      "ğŸ¦…",
      "ğŸ",
      "ğŸ¦•"
    ],
  },
  {
    title: "ë‚ ì”¨/ì²œì²´",
    icon: "â˜€ï¸",
    emojis: [
      "â˜€ï¸", "ğŸŒ¤ï¸", "â›…", "ğŸŒ¥ï¸", "â˜ï¸", "ğŸŒ¦ï¸", "ğŸŒ§ï¸", "â›ˆï¸", "ğŸŒ©ï¸", "ğŸŒ¨ï¸", "â„ï¸", "â˜ƒï¸", "â›„", "ğŸŒ¬ï¸", 
      "ğŸ’¨", "ğŸŒªï¸", "ğŸŒ«ï¸", "ğŸŒˆ", "â˜‚ï¸", "â˜”", "âš¡", "â„ï¸", "ğŸŒ€", "ğŸŒŠ", "ğŸŒ‹", "ğŸ”¥", "ğŸ’§", "ğŸŒŠ", 
      "ğŸŒŒ", "ğŸŒ™", "ğŸŒš", "ğŸŒ•", "ğŸŒ–", "ğŸŒ—", "ğŸŒ˜", "ğŸŒ‘", "ğŸŒ’", "ğŸŒ“", "ğŸŒ”", "ğŸŒ›", "ğŸŒœ", "ğŸŒ", 
      "ğŸŒ", "â­", "ğŸŒŸ", "ğŸ’«", "âœ¨", "â˜„ï¸", "ğŸŒ ", "ğŸŒ¡ï¸", "ğŸª", "âš¡", "ğŸ”†", "ğŸ”…", "â™¨ï¸", "ğŸ’¥", 
      "â˜ƒï¸", "â›„", "ğŸ§Š", "ğŸŒ„", "ğŸŒ…", "ğŸŒ‡", "ğŸŒ†", "ğŸŒƒ", "ğŸŒ‰", "ğŸŒ", "ğŸï¸", "ğŸŒ", "ğŸŒ", "ğŸŒ", 
      "ğŸŒ", "ğŸœï¸", "ğŸ–ï¸", "ğŸï¸", "â˜˜ï¸", "ğŸŒ±", "ğŸŒ¿", "ğŸŒ´", "ğŸŒ³", "ğŸŒ²", "â›°ï¸", "â˜€ï¸", "ğŸŒ¦ï¸", "ğŸŒ§ï¸", 
      "â˜„ï¸", "âš¡", "ğŸŒˆ", "â˜”",
      "ğŸ„",
      "ğŸš",
      "ğŸŒ·",
      "ğŸŒ¹",
      "ğŸŒº",
      "ğŸª»",
      "ğŸŒ¸",
      "ğŸŒ¼"
    ]
  },
  {
    title: "ì¶•í•˜/ê¸°ë…",
    icon: "ğŸ‰",
    emojis: [
      "ğŸ‰",
      "ğŸŠ",
      "ğŸ’¯",
      "ğŸ",
      "ğŸ›ï¸",
      "ğŸ§§",
      "ğŸ’°",
      "ğŸ‘°",
      "ğŸ¤µ",
      "ğŸ’",
      "ğŸ”®",
      "ğŸ†",
      "ğŸ¥‡",
      "ğŸ¥ˆ",
      "ğŸ¥‰",
      "ğŸ©·",
      "â¤ï¸",
      "ğŸ§¡",
      "ğŸ’›",
      "ğŸ’š",
      "ğŸ©µ",
      "ğŸ’™",
      "ğŸ’œ",
      "ğŸ–¤",
      "ğŸ©¶",
      "ğŸ¤",
      "ğŸ¤",
      "â¤ï¸â€ğŸ”¥",
      "â¤ï¸â€ğŸ©¹",
      "ğŸ’–",
      "ğŸ’˜",
      "ğŸ’",
      "âœ…",
      "â‡ï¸",
      "ğŸ•",
      "ğŸ“£",
      "ğŸ’¬",
      "ğŸ’­"
    ],
  },
  {
    title: "ì—…ë¬´",
    icon: "ğŸ’¼",
    emojis: [
      "ğŸ’¼",
      "ğŸ“š",
      "ğŸ“–",
      "ğŸ”",
      "âœï¸",
      "ğŸ“",
      "ğŸ“‹",
      "ğŸ“ˆ",
      "ğŸ“‰",
      "ğŸ“Š",
      "ğŸ’¡",
      "ğŸ’¸",
      "ğŸ’µ",
      "ğŸ’°",
      "â°",
      "âŒš",
      "ğŸ’»",
      "ğŸ–¥ï¸",
      "ğŸ“¸",
      "ğŸ—£ï¸",
      "ğŸ’¤",
      "ğŸš½",
      "ğŸ“",
      "âœ’ï¸",
      "ğŸš—",
      "ğŸš•",
      "ğŸš™",
      "ğŸ›µ",
      "ğŸšŒ",
      "ğŸš’",
      "ğŸš…",
      "âœˆï¸",
      "ğŸš€",
      "ğŸ—½",
      "ğŸ—¼",
      "ğŸ¡",
      "ğŸ¢",
      "â˜‚ï¸",
      "â›±ï¸",
      "ğŸ‘™",
      "ğŸ‘—",
      "ğŸ€",
      "ğŸ›’",
      "ğŸ›ï¸",
      "â›°ï¸",
      "â›º",
      "ğŸ ",
      "ğŸš¡",
    ],
  },
  {
    title: "êµ­ê¸°",
    icon: "ğŸ",
    emojis: [
      "ğŸ", "ğŸš©", "ğŸ´", "ğŸ³ï¸", "ğŸ³ï¸â€ğŸŒˆ", "ğŸ³ï¸â€âš§ï¸", "ğŸ´â€â˜ ï¸", "ğŸ‡ºğŸ‡³", 
      "ğŸ‡¦ğŸ‡¨", "ğŸ‡¦ğŸ‡©", "ğŸ‡¦ğŸ‡ª", "ğŸ‡¦ğŸ‡«", "ğŸ‡¦ğŸ‡¬", "ğŸ‡¦ğŸ‡®", "ğŸ‡¦ğŸ‡±", "ğŸ‡¦ğŸ‡²", "ğŸ‡¦ğŸ‡´", "ğŸ‡¦ğŸ‡¶", "ğŸ‡¦ğŸ‡·", "ğŸ‡¦ğŸ‡¸", "ğŸ‡¦ğŸ‡¹", 
      "ğŸ‡¦ğŸ‡º", "ğŸ‡¦ğŸ‡¼", "ğŸ‡¦ğŸ‡½", "ğŸ‡¦ğŸ‡¿", "ğŸ‡§ğŸ‡¦", "ğŸ‡§ğŸ‡§", "ğŸ‡§ğŸ‡©", "ğŸ‡§ğŸ‡ª", "ğŸ‡§ğŸ‡«", "ğŸ‡§ğŸ‡¬", "ğŸ‡§ğŸ‡­", "ğŸ‡§ğŸ‡®", "ğŸ‡§ğŸ‡¯", 
      "ğŸ‡§ğŸ‡±", "ğŸ‡§ğŸ‡²", "ğŸ‡§ğŸ‡³", "ğŸ‡§ğŸ‡´", "ğŸ‡§ğŸ‡¶", "ğŸ‡§ğŸ‡·", "ğŸ‡§ğŸ‡¸", "ğŸ‡§ğŸ‡¹", "ğŸ‡§ğŸ‡»", "ğŸ‡§ğŸ‡¼", "ğŸ‡§ğŸ‡¾", "ğŸ‡§ğŸ‡¿", "ğŸ‡¨ğŸ‡¦", 
      "ğŸ‡¨ğŸ‡¨", "ğŸ‡¨ğŸ‡©", "ğŸ‡¨ğŸ‡«", "ğŸ‡¨ğŸ‡¬", "ğŸ‡¨ğŸ‡­", "ğŸ‡¨ğŸ‡®", "ğŸ‡¨ğŸ‡°", "ğŸ‡¨ğŸ‡±", "ğŸ‡¨ğŸ‡²", "ğŸ‡¨ğŸ‡³", "ğŸ‡¨ğŸ‡´", "ğŸ‡¨ğŸ‡µ", "ğŸ‡¨ğŸ‡·", 
      "ğŸ‡¨ğŸ‡º", "ğŸ‡¨ğŸ‡»", "ğŸ‡¨ğŸ‡¼", "ğŸ‡¨ğŸ‡½", "ğŸ‡¨ğŸ‡¾", "ğŸ‡¨ğŸ‡¿", "ğŸ‡©ğŸ‡ª", "ğŸ‡©ğŸ‡¬", "ğŸ‡©ğŸ‡¯", "ğŸ‡©ğŸ‡°", "ğŸ‡©ğŸ‡²", "ğŸ‡©ğŸ‡´", "ğŸ‡©ğŸ‡¿", 
      "ğŸ‡ªğŸ‡¦", "ğŸ‡ªğŸ‡¨", "ğŸ‡ªğŸ‡ª", "ğŸ‡ªğŸ‡¬", "ğŸ‡ªğŸ‡­", "ğŸ‡ªğŸ‡·", "ğŸ‡ªğŸ‡¸", "ğŸ‡ªğŸ‡¹", "ğŸ‡ªğŸ‡º", "ğŸ‡«ğŸ‡®", "ğŸ‡«ğŸ‡¯", "ğŸ‡«ğŸ‡°", "ğŸ‡«ğŸ‡²", 
      "ğŸ‡«ğŸ‡´", "ğŸ‡«ğŸ‡·", "ğŸ‡¬ğŸ‡¦", "ğŸ‡¬ğŸ‡§", "ğŸ‡¬ğŸ‡©", "ğŸ‡¬ğŸ‡ª", "ğŸ‡¬ğŸ‡«", "ğŸ‡¬ğŸ‡¬", "ğŸ‡¬ğŸ‡­", "ğŸ‡¬ğŸ‡®", "ğŸ‡¬ğŸ‡±", "ğŸ‡¬ğŸ‡²", "ğŸ‡¬ğŸ‡³", 
      "ğŸ‡¬ğŸ‡µ", "ğŸ‡¬ğŸ‡¶", "ğŸ‡¬ğŸ‡·", "ğŸ‡¬ğŸ‡¸", "ğŸ‡¬ğŸ‡¹", "ğŸ‡¬ğŸ‡º", "ğŸ‡¬ğŸ‡¼", "ğŸ‡¬ğŸ‡¾", "ğŸ‡­ğŸ‡°", "ğŸ‡­ğŸ‡²", "ğŸ‡­ğŸ‡³", "ğŸ‡­ğŸ‡·", "ğŸ‡­ğŸ‡¹", 
      "ğŸ‡­ğŸ‡º", "ğŸ‡®ğŸ‡¨", "ğŸ‡®ğŸ‡©", "ğŸ‡®ğŸ‡ª", "ğŸ‡®ğŸ‡±", "ğŸ‡®ğŸ‡²", "ğŸ‡®ğŸ‡³", "ğŸ‡®ğŸ‡´", "ğŸ‡®ğŸ‡¶", "ğŸ‡®ğŸ‡·", "ğŸ‡®ğŸ‡¸", "ğŸ‡®ğŸ‡¹", "ğŸ‡¯ğŸ‡ª", 
      "ğŸ‡¯ğŸ‡²", "ğŸ‡¯ğŸ‡´", "ğŸ‡¯ğŸ‡µ", "ğŸ‡°ğŸ‡ª", "ğŸ‡°ğŸ‡¬", "ğŸ‡°ğŸ‡­", "ğŸ‡°ğŸ‡®", "ğŸ‡°ğŸ‡²", "ğŸ‡°ğŸ‡³", "ğŸ‡°ğŸ‡µ", "ğŸ‡°ğŸ‡·", "ğŸ‡°ğŸ‡¼", "ğŸ‡°ğŸ‡¾", 
      "ğŸ‡°ğŸ‡¿", "ğŸ‡±ğŸ‡¦", "ğŸ‡±ğŸ‡§", "ğŸ‡±ğŸ‡¨", "ğŸ‡±ğŸ‡®", "ğŸ‡±ğŸ‡°", "ğŸ‡±ğŸ‡·", "ğŸ‡±ğŸ‡¸", "ğŸ‡±ğŸ‡¹", "ğŸ‡±ğŸ‡º", "ğŸ‡±ğŸ‡»", "ğŸ‡±ğŸ‡¾", "ğŸ‡²ğŸ‡¦", 
      "ğŸ‡²ğŸ‡¨", "ğŸ‡²ğŸ‡©", "ğŸ‡²ğŸ‡ª", "ğŸ‡²ğŸ‡«", "ğŸ‡²ğŸ‡¬", "ğŸ‡²ğŸ‡­", "ğŸ‡²ğŸ‡°", "ğŸ‡²ğŸ‡±", "ğŸ‡²ğŸ‡²", "ğŸ‡²ğŸ‡³", "ğŸ‡²ğŸ‡´", "ğŸ‡²ğŸ‡µ", "ğŸ‡²ğŸ‡¶", 
      "ğŸ‡²ğŸ‡·", "ğŸ‡²ğŸ‡¸", "ğŸ‡²ğŸ‡¹", "ğŸ‡²ğŸ‡º", "ğŸ‡²ğŸ‡»", "ğŸ‡²ğŸ‡¼", "ğŸ‡²ğŸ‡½", "ğŸ‡²ğŸ‡¾", "ğŸ‡²ğŸ‡¿", "ğŸ‡³ğŸ‡¦", "ğŸ‡³ğŸ‡¨", "ğŸ‡³ğŸ‡ª", "ğŸ‡³ğŸ‡«", 
      "ğŸ‡³ğŸ‡¬", "ğŸ‡³ğŸ‡®", "ğŸ‡³ğŸ‡±", "ğŸ‡³ğŸ‡´", "ğŸ‡³ğŸ‡µ", "ğŸ‡³ğŸ‡·", "ğŸ‡³ğŸ‡º", "ğŸ‡³ğŸ‡¿", "ğŸ‡´ğŸ‡²", "ğŸ‡µğŸ‡¦", "ğŸ‡µğŸ‡ª", "ğŸ‡µğŸ‡«", "ğŸ‡µğŸ‡¬", 
      "ğŸ‡µğŸ‡­", "ğŸ‡µğŸ‡°", "ğŸ‡µğŸ‡±", "ğŸ‡µğŸ‡²", "ğŸ‡µğŸ‡³", "ğŸ‡µğŸ‡·", "ğŸ‡µğŸ‡¸", "ğŸ‡µğŸ‡¹", "ğŸ‡µğŸ‡¼", "ğŸ‡µğŸ‡¾", "ğŸ‡¶ğŸ‡¦", "ğŸ‡·ğŸ‡ª", "ğŸ‡·ğŸ‡´", 
      "ğŸ‡·ğŸ‡¸", "ğŸ‡·ğŸ‡º", "ğŸ‡·ğŸ‡¼", "ğŸ‡¸ğŸ‡¦", "ğŸ‡¸ğŸ‡§", "ğŸ‡¸ğŸ‡¨", "ğŸ‡¸ğŸ‡©", "ğŸ‡¸ğŸ‡ª", "ğŸ‡¸ğŸ‡¬", "ğŸ‡¸ğŸ‡­", "ğŸ‡¸ğŸ‡®", "ğŸ‡¸ğŸ‡¯", "ğŸ‡¸ğŸ‡°", 
      "ğŸ‡¸ğŸ‡±", "ğŸ‡¸ğŸ‡²", "ğŸ‡¸ğŸ‡³", "ğŸ‡¸ğŸ‡´", "ğŸ‡¸ğŸ‡·", "ğŸ‡¸ğŸ‡¸", "ğŸ‡¸ğŸ‡¹", "ğŸ‡¸ğŸ‡»", "ğŸ‡¸ğŸ‡½", "ğŸ‡¸ğŸ‡¾", "ğŸ‡¸ğŸ‡¿", "ğŸ‡¹ğŸ‡¦", "ğŸ‡¹ğŸ‡¨", 
      "ğŸ‡¹ğŸ‡©", "ğŸ‡¹ğŸ‡«", "ğŸ‡¹ğŸ‡¬", "ğŸ‡¹ğŸ‡­", "ğŸ‡¹ğŸ‡¯", "ğŸ‡¹ğŸ‡°", "ğŸ‡¹ğŸ‡±", "ğŸ‡¹ğŸ‡²", "ğŸ‡¹ğŸ‡³", "ğŸ‡¹ğŸ‡´", "ğŸ‡¹ğŸ‡·", "ğŸ‡¹ğŸ‡¹", "ğŸ‡¹ğŸ‡»", 
      "ğŸ‡¹ğŸ‡¼", "ğŸ‡¹ğŸ‡¿", "ğŸ‡ºğŸ‡¦", "ğŸ‡ºğŸ‡¬", "ğŸ‡ºğŸ‡²", "ğŸ‡ºğŸ‡¸", "ğŸ‡ºğŸ‡¾", "ğŸ‡ºğŸ‡¿", "ğŸ‡»ğŸ‡¦", "ğŸ‡»ğŸ‡¨", "ğŸ‡»ğŸ‡ª", "ğŸ‡»ğŸ‡¬", "ğŸ‡»ğŸ‡®", 
      "ğŸ‡»ğŸ‡³", "ğŸ‡»ğŸ‡º", "ğŸ‡¼ğŸ‡«", "ğŸ‡¼ğŸ‡¸", "ğŸ‡½ğŸ‡°", "ğŸ‡¾ğŸ‡ª", "ğŸ‡¾ğŸ‡¹", "ğŸ‡¿ğŸ‡¦", "ğŸ‡¿ğŸ‡²", "ğŸ‡¿ğŸ‡¼"
    ],
  },
]

const { height: SCREEN_HEIGHT } = Dimensions.get("window")
const MODAL_HEIGHT = SCREEN_HEIGHT * 0.5

const EmojiKeyboard: React.FC<EmojiKeyboardProps> = ({ onEmojiSelect, onClose, isVisible }) => {
  const [selectedCategory, setSelectedCategory] = useState(0)

  return (
    <Modal
      isVisible={isVisible}
      onBackdropPress={onClose}
      onSwipeComplete={onClose}
      swipeDirection={["down"]}
      style={styles.modal}
      propagateSwipe
      backdropOpacity={0.5}
    >
      <View style={styles.container}>
        <View style={styles.handleBar} />

        {/* Main content area with fixed height */}
        <View style={styles.contentContainer}>
          <FlatList
            data={EMOJI_CATEGORIES[selectedCategory].emojis}
            renderItem={({ item }) => (
              <TouchableOpacity style={styles.emojiItem} onPress={() => onEmojiSelect(item)}>
                <Text style={styles.emojiText}>{item}</Text>
              </TouchableOpacity>
            )}
            keyExtractor={(item, index) => index.toString()}
            numColumns={6}
            showsVerticalScrollIndicator={false}
            contentContainerStyle={styles.emojiList}
          />
        </View>

        {/* Fixed bottom category bar */}
        <View style={styles.categoryBarContainer}>
          <ScrollView horizontal showsHorizontalScrollIndicator={false} style={styles.categoryContainer}>
            {EMOJI_CATEGORIES.map((category, index) => (
              <TouchableOpacity
                key={category.title}
                style={[styles.categoryButton, selectedCategory === index && styles.selectedCategory]}
                onPress={() => setSelectedCategory(index)}
              >
                <Text style={styles.categoryText}>{category.icon}</Text>
              </TouchableOpacity>
            ))}
          </ScrollView>
        </View>
      </View>
    </Modal>
  )
}

const styles = StyleSheet.create({
  modal: {
    justifyContent: "flex-end",
    margin: 0,
  },
  container: {
    height: MODAL_HEIGHT,
    backgroundColor: "#ffffff",
    borderTopLeftRadius: 20,
    borderTopRightRadius: 20,
    paddingTop: 12,
    flexDirection: "column",
  },
  handleBar: {
    width: 40,
    height: 4,
    backgroundColor: "#a5a5a5",
    borderRadius: 2,
    alignSelf: "center",
    marginBottom: 8,
  },
  contentContainer: {
    flex: 1,
    paddingBottom: 0,
  },
  emojiList: {
    paddingHorizontal: 16,
    paddingBottom: 8,
  },
  emojiItem: {
    width: "16.666%",
    aspectRatio: 1,
    justifyContent: "center",
    alignItems: "center",
  },
  emojiText: {
    fontSize: 32,
  },
  categoryBarContainer: {
    height: 80,
    borderTopWidth: 1,
    borderTopColor: "#EBEBEB",
  },
  categoryContainer: {
    flexDirection: "row",
    paddingVertical: 12,
    paddingHorizontal: 24,
  },
  categoryButton: {
    width: 40,
    height: 40,
    justifyContent: "center",
    alignItems: "center",
    borderRadius: 20,
    marginHorizontal: 4,
  },
  selectedCategory: {
    backgroundColor: "#EBEBEB",
  },
  categoryText: {
    fontSize: 24,
  },
})

export default EmojiKeyboard

